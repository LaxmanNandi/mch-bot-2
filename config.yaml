# Minimal configuration for the MCH-inspired bot

mode: demo
timezone: Asia/Kolkata

market:
  open: "09:15"
  close: "15:30"
  holidays: []
  weekdays: [MON, TUE, WED, THU, FRI]

instrument:
  symbol: NIFTY
  lot_size: 75
  weekly_expiry_weekday: TUE  # NSE weekly expiry (Tuesday)
  strike_step: 50
  underlying_symbol_zerodha: "NSE:NIFTY 50"

risk:
  account_equity: 200_000       # INR (updated actual trading capital)
  max_risk_per_trade_pct: 3.5   # ADJUSTED: 3.5% to allow 100-pt wings (was 2.0%)
  max_positions: 1
  stop_loss_pct: 100.0          # total position SL from credit received
  take_profit_pct: 50.0         # per-position target from credit

strategy:
  name: iron_condor
  # Balanced IC selection by distance around spot
  target_distance_points: 300    # approx OTM distance from spot per short leg (200-500 recommended)
  wing_width_points: 100         # OPTIMIZED: 100 pts = Rs.7,500 max loss/lot (was 400)
  wing_width_auto: false         # Set true to calculate dynamically based on risk
  min_credit_per_ic: 1           # minimum net credit per condor
  # Legacy delta param kept for compatibility, not used by default
  target_delta: 0.15
  entry_intraday_window: ["09:30", "12:00"]
  exit_intraday_window: ["15:10", "15:15"]
  min_days_to_expiry: 2
  # Dynamic planning inputs
  risk_profile: moderate         # conservative | moderate | aggressive
  target_credit_points: 90       # target net credit (points per unit)
  max_loss_limit: 10000          # INR per lot: reduced from 30k to allow position sizing
  preferred_delta: 0.20          # short legs, used if chain deltas available
  min_otm_distance: 200
  max_otm_distance: 500

mch:
  rci_threshold: 0.0            # minimum coherence to allow trading
  vix_bounds: [11.0, 20.0]      # LOWERED from 12.0 to 11.0 (current VIX 11.86)
  trend_neutrality_max_adx: 20  # favor range conditions
  stability_lookback: 5         # bars for coherence averaging

execution:
  broker: paper
  dry_run: true
  slippage_bps: 2               # 2 basis points
  cooldown_minutes: 30          # wait time after exit before re-entry
  max_trades_per_day: 5         # cap daily trades to prevent over-trading
  api_min_interval_s: 0.25
  monitor_seconds: 120
  monitor_poll_seconds: 2.0

backtest:
  commission_per_lot: 40        # total brokerage + fees estimate (INR)
  risk_free_rate: 0.06          # annualized

demo:
  spot: 23500
  iv: 0.18

data_sources:
  use_kite: true              # Primary and only data source - Zerodha Kite
  use_yahoo_fallback: false
  vix_symbol_kite: "NSE:INDIA VIX"
  # NSE India API removed - using only Zerodha Kite for all market data
  # This eliminates timestamp staleness warnings from NSE API

liquidity:
  min_oi: 1000
  min_volume: 100

telegram_alerts:
  immediate: [startup, entry, exit, error, vix_spike]
  hourly_digest: [scan, rejected, monitoring]
  formatting:
    use_emojis: true
    time_format: "12h"
    currency_symbol: "\u20B9"
  summary_schedule:
    enabled: true
    interval_minutes: 60

notifications:
  enabled: true
  telegram:
    immediate_alerts: true
    daily_summary: true
    weekly_report: true
  retry_attempts: 3
  queue_size: 50
